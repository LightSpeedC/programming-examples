<!DOCTYPE HTML>
<html lang="ja">
	<head>
		<meta charset="UTF-8">
		<title>react-16-template</title>
		<style type="text/css">
		html { font-family: 'ＭＳ Ｐゴシック'; font-size: 1.5em; }
		td { text-align: center; }
		</style>
		<script src="react.development.js"></script>
		<script src="react-dom.development.js"></script>
		<script src="babel.min.js"></script>
		<!--
		<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
		<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
		<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
		-->
	</head>
	<body>

		<hr/>
		<div id="$contents"></div>
		<hr/>

		<a href="https://unpkg.com/react@16/umd/react.development.js">react.development.js</a>
		<a href="https://unpkg.com/react-dom@16/umd/react-dom.development.js">react-dom.development.js</a>
		<a href="https://unpkg.com/react@16/umd/react.production.min.js">react.production.min.js</a>
		<a href="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js">react-dom.production.min.js</a>
		<a href="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.min.js">browser.min.js</a>
		<a href="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js">babel.min.js</a>

		<script type="text/babel">

let msgID = 0;
let lastRef = null;
const msgList = [];
function pr(x) {
	// return console.log('' + (++msgID) + ' ' + x + ' ' + new Date().toString());
	++msgID;
	msgList.push(<tr key={msgID}><td>{msgID}</td><td>{x}</td><td>{new Date().toString()}</td></tr>);
	if (msgList.length > 20) msgList.shift();
}
pr('init');
document.addEventListener('DOMContentLoaded', ()=>pr('a DOMContentLoaded'));
// MyApp
class MyApp extends React.Component {
	render() {
		pr('render');
		return <div>
				MyApp<br/>
				<button onClick={() => {
						pr('click');
						this.setState({});
					}}>ボタン</button><br/>
				<table ref={e=> {
					pr('ref ' + e + ' ' + (lastRef === e));
					if (e) lastRef = e;
					e && e.addEventListener('DOMContentLoaded', ()=>pr('DOMContentLoaded'));
				}}><tbody>{msgList}</tbody></table>
				<MyComp/>
			</div>;
	}
	componentWillMount() { pr('componentWillMount'); }
	componentDidMount()  { pr('componentDidMount'); }
	componentDidUpdate() { pr('componentDidUpdate'); }
};

class MyComp extends React.Component {
	render() {
		pr('MyComp.render');
		return <div ref={() => pr('MyComp.ref')}>
			</div>;
	}
	componentWillMount() { pr('MyComp.componentWillMount'); }
	componentDidMount()  { pr('MyComp.componentDidMount'); }
	componentDidUpdate() { pr('MyComp.componentDidUpdate'); }
};


ReactDOM.render(<MyApp />, $contents);

// range([from], to)
function range(from, to) {
	if (arguments.length === 1) to = from, from = 0;
	const arr = [];
	for (let i = from; i < to; ++i)
		arr.push(i);
	return arr;
}

		</script>
	</body>
</html>
