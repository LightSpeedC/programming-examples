<html>
<head>
	<meta charset="utf-8">
	<title>D3.js</title>
	<!--<script src="http://d3js.org/d3.v3.min.js"></script>-->
	<script src="../js/d3.v3.min.js"></script>
	<style>
	#box {border:1px solid #ccc; margin-bottom:10px;}
	</style>
</head>
<body>
<div id="box"></div>
</body>
<script type="text/javascript">
var stage;
window.onload = function() {
	stage = d3.select(box).append('svg:svg')
		.attr('width', box.offsetWidth)
		.attr('height', 300);
	setInterval('update()', 200);
};
var colors = d3.scale.category10();
var lines = d3.svg.line()
	.x(function (d, i) { return i * 10; })
	.y(function (d, i) { return d; });

var points = [];

function update() {
	points.push(Math.random() * 100 + 100);
	if (points.length > box.offsetWidth / 10)
		points.shift();

	// 削除する
	stage.selectAll('path').remove();

	// 描画する
	stage.append('path')
		.attr('d', lines(points))
		.attr('stroke', colors(0))
		.attr('fill', 'none')
		.attr('opacity', 1);
}
</script>
</html>
